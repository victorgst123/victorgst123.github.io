<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>2-Digit Minus 1-Digit (50 Questions, 2 Minutes)</title>
  <style>
    :root {
      --bg: #0b0d10;
      --panel: #12151b;
      --panel2: #161b24;
      --text: #e9eef7;
      --muted: #a9b3c6;
      --accent: #5aa9ff;
      --good: #45d483;
      --bad: #ff5a6a;
      --warn: #ffd35a;
      --border: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius: 16px;
      --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: var(--font);
      background: radial-gradient(1200px 600px at 20% 10%, rgba(90,169,255,0.18), transparent 60%),
                  radial-gradient(900px 500px at 90% 20%, rgba(69,212,131,0.14), transparent 55%),
                  radial-gradient(900px 500px at 70% 90%, rgba(255,90,106,0.10), transparent 55%),
                  var(--bg);
      color: var(--text);
      min-height: 100vh;
      display: grid;
      place-items: center;
      padding: 20px;
    }

    .app {
      width: min(920px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.04), transparent 35%), var(--panel);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    header {
      padding: 22px 22px 14px;
      border-bottom: 1px solid var(--border);
      display: flex;
      gap: 14px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .title {
      display: flex;
      gap: 12px;
      align-items: baseline;
      flex-wrap: wrap;
    }
    .title h1 {
      margin: 0;
      font-size: 18px;
      letter-spacing: 0.2px;
      font-weight: 700;
    }
    .title .subtitle {
      color: var(--muted);
      font-size: 13px;
    }

    .status {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill {
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      border-radius: 999px;
      padding: 8px 12px;
      font-size: 13px;
      color: var(--muted);
      display: inline-flex;
      gap: 8px;
      align-items: center;
      user-select: none;
    }
    .pill strong { color: var(--text); font-weight: 700; }

    .timer {
      color: var(--text);
    }
    .timer.warn { color: var(--warn); }
    .timer.danger { color: var(--bad); }

    main {
      padding: 22px;
      display: grid;
      gap: 18px;
    }

    .panel {
      background: var(--panel2);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 18px;
    }

    .row {
      display: grid;
      grid-template-columns: 1.1fr 0.9fr;
      gap: 18px;
    }
    @media (max-width: 820px) {
      .row { grid-template-columns: 1fr; }
    }

    .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
    }

    button {
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.06);
      color: var(--text);
      padding: 10px 14px;
      border-radius: 12px;
      font-weight: 650;
      cursor: pointer;
      transition: transform 0.06s ease, background 0.2s ease, border-color 0.2s ease;
      user-select: none;
    }
    button:hover { background: rgba(255,255,255,0.09); }
    button:active { transform: translateY(1px); }
    button.primary {
      background: rgba(90,169,255,0.18);
      border-color: rgba(90,169,255,0.35);
    }
    button.primary:hover { background: rgba(90,169,255,0.24); }
    button.danger {
      background: rgba(255,90,106,0.14);
      border-color: rgba(255,90,106,0.35);
    }

    .game {
      display: grid;
      gap: 12px;
      align-items: start;
    }

    .prompt {
      display: grid;
      gap: 6px;
      padding: 16px;
      border-radius: 16px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
    }

    .prompt .label {
      color: var(--muted);
      font-size: 13px;
    }
    .prompt .equation {
      font-size: 40px;
      letter-spacing: 0.5px;
      font-weight: 800;
      line-height: 1.1;
    }

    .inputRow {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    input[type="number"] {
      width: 160px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.25);
      color: var(--text);
      font-size: 18px;
      outline: none;
    }
    input[type="number"]:focus {
      border-color: rgba(90,169,255,0.55);
      box-shadow: 0 0 0 3px rgba(90,169,255,0.18);
    }

    .hint {
      color: var(--muted);
      font-size: 13px;
      margin-left: 2px;
    }

    .feedback {
      min-height: 20px;
      font-size: 14px;
    }
    .feedback.good { color: var(--good); }
    .feedback.bad { color: var(--bad); }

    .progressWrap {
      display: grid;
      gap: 8px;
    }
    .bar {
      height: 10px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      overflow: hidden;
      border: 1px solid var(--border);
    }
    .bar > div {
      height: 100%;
      width: 0%;
      background: rgba(90,169,255,0.75);
      transition: width 0.2s ease;
    }
    .small {
      color: var(--muted);
      font-size: 13px;
    }

    .statsGrid {
      display: grid;
      gap: 12px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    @media (max-width: 560px) {
      .statsGrid { grid-template-columns: 1fr; }
    }
    .stat {
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      border-radius: 16px;
      padding: 14px;
      display: grid;
      gap: 6px;
    }
    .stat .k { color: var(--muted); font-size: 13px; }
    .stat .v { font-size: 22px; font-weight: 800; }

    .review {
      display: grid;
      gap: 10px;
    }
    .reviewItem {
      border: 1px solid var(--border);
      background: rgba(0,0,0,0.18);
      border-radius: 14px;
      padding: 12px 14px;
      display: grid;
      gap: 6px;
    }
    .reviewItem .eq { font-size: 16px; font-weight: 750; }
    .reviewItem .ans { color: var(--muted); font-size: 13px; }
    .badge {
      display: inline-flex;
      padding: 2px 10px;
      border-radius: 999px;
      border: 1px solid var(--border);
      font-size: 12px;
      margin-left: 10px;
      vertical-align: middle;
    }
    .badge.bad { color: var(--bad); border-color: rgba(255,90,106,0.35); background: rgba(255,90,106,0.10); }
    .badge.good { color: var(--good); border-color: rgba(69,212,131,0.35); background: rgba(69,212,131,0.10); }

    .footerNote {
      color: var(--muted);
      font-size: 12px;
      padding: 0 22px 20px;
    }

    .hidden { display: none !important; }
  </style>
</head>
<body>
  <div class="app" role="application" aria-label="Math game">
    <header>
      <div class="title">
        <h1>2-Digit âˆ’ 1-Digit Challenge</h1>
        <div class="subtitle">50 questions â€¢ 2 minutes â€¢ pure front-end (GitHub Pages ready)</div>
      </div>
      <div class="status">
        <div class="pill">Time: <strong id="timeLeft" class="timer">02:00</strong></div>
        <div class="pill">Progress: <strong id="progressText">0 / 50</strong></div>
      </div>
    </header>

    <main>
      <div class="row">
        <section class="panel game" aria-label="Game panel">
          <div class="controls">
            <div class="small">
              Tip: Press <strong>Enter</strong> to submit.
            </div>
            <div style="display:flex; gap:10px; flex-wrap:wrap;">
              <button id="startBtn" class="primary">Start</button>
              <button id="restartBtn" class="danger hidden">Restart</button>
            </div>
          </div>

          <div class="progressWrap">
            <div class="bar" aria-label="Progress bar"><div id="barFill"></div></div>
            <div class="small" id="modeText">Click Start to begin.</div>
          </div>

          <div id="questionArea" class="prompt hidden">
            <div class="label" id="qLabel">Question</div>
            <div class="equation" id="equation">12 âˆ’ 3 = ?</div>
            <div class="inputRow">
              <input id="answerInput" type="number" inputmode="numeric" autocomplete="off" aria-label="Answer input" />
              <button id="submitBtn" class="primary">Submit</button>
              <span class="hint" id="hintText"></span>
            </div>
            <div id="feedback" class="feedback" aria-live="polite"></div>
          </div>
        </section>

        <section class="panel" aria-label="Results panel">
          <div id="resultsEmpty" class="small">
            Results will appear here after you finish (or when time runs out).
          </div>

          <div id="resultsArea" class="hidden">
            <div class="statsGrid" style="margin-bottom: 12px;">
              <div class="stat">
                <div class="k">Score</div>
                <div class="v" id="scoreText">0 / 50</div>
              </div>
              <div class="stat">
                <div class="k">Accuracy</div>
                <div class="v" id="accuracyText">0%</div>
              </div>
              <div class="stat">
                <div class="k">Answered</div>
                <div class="v" id="answeredText">0</div>
              </div>
              <div class="stat">
                <div class="k">Time Used</div>
                <div class="v" id="timeUsedText">0s</div>
              </div>
            </div>

            <div class="review">
              <div style="display:flex; align-items:baseline; justify-content:space-between; gap:10px; flex-wrap:wrap;">
                <div style="font-weight:800;">Review</div>
                <div class="small" id="wrongCountText"></div>
              </div>
              <div id="reviewList"></div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div class="footerNote">
      This game runs entirely in your browser. No backend, no tracking, no storage.
    </div>
  </div>

  <script>
    // --- Config ---
    const TOTAL_QUESTIONS = 50;
    const TIME_LIMIT_SECONDS = 120;

    // Question constraints:
    // - twoDigit: 10..99
    // - oneDigit: 1..9
    // To avoid negative answers for younger kids, enforce twoDigit >= oneDigit.
    function makeQuestion() {
      const twoDigit = randInt(10, 99);
      const oneDigit = randInt(1, 9);
      const a = Math.max(twoDigit, oneDigit);
      const b = Math.min(twoDigit, oneDigit);
      return {
        a,
        b,
        text: `${a} âˆ’ ${b}`,
        correct: a - b
      };
    }

    function randInt(min, max) {
      // inclusive
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // --- State ---
    let questions = [];
    let idx = 0;
    let correctCount = 0;
    let answeredCount = 0;
    let wrong = []; // {i, a, b, correct, user}
    let started = false;
    let finished = false;

    let startTimeMs = 0;
    let timerId = null;
    let remaining = TIME_LIMIT_SECONDS;

    // --- Elements ---
    const startBtn = document.getElementById("startBtn");
    const restartBtn = document.getElementById("restartBtn");
    const submitBtn = document.getElementById("submitBtn");
    const answerInput = document.getElementById("answerInput");

    const timeLeftEl = document.getElementById("timeLeft");
    const progressTextEl = document.getElementById("progressText");
    const barFillEl = document.getElementById("barFill");
    const modeTextEl = document.getElementById("modeText");

    const questionArea = document.getElementById("questionArea");
    const qLabel = document.getElementById("qLabel");
    const equationEl = document.getElementById("equation");
    const feedbackEl = document.getElementById("feedback");
    const hintTextEl = document.getElementById("hintText");

    const resultsEmpty = document.getElementById("resultsEmpty");
    const resultsArea = document.getElementById("resultsArea");
    const scoreText = document.getElementById("scoreText");
    const accuracyText = document.getElementById("accuracyText");
    const answeredText = document.getElementById("answeredText");
    const timeUsedText = document.getElementById("timeUsedText");
    const wrongCountText = document.getElementById("wrongCountText");
    const reviewList = document.getElementById("reviewList");

    // --- UI helpers ---
    function setTimerClass() {
      timeLeftEl.classList.remove("warn", "danger");
      if (remaining <= 15) timeLeftEl.classList.add("danger");
      else if (remaining <= 30) timeLeftEl.classList.add("warn");
    }

    function formatTime(sec) {
      const m = Math.floor(sec / 60);
      const s = sec % 60;
      return String(m).padStart(2, "0") + ":" + String(s).padStart(2, "0");
    }

    function updateTopBar() {
      timeLeftEl.textContent = formatTime(remaining);
      setTimerClass();
      progressTextEl.textContent = `${Math.min(idx, TOTAL_QUESTIONS)} / ${TOTAL_QUESTIONS}`;
      const pct = (Math.min(idx, TOTAL_QUESTIONS) / TOTAL_QUESTIONS) * 100;
      barFillEl.style.width = `${pct}%`;
    }

    function showQuestion() {
      const q = questions[idx];
      qLabel.textContent = `Question ${idx + 1} of ${TOTAL_QUESTIONS}`;
      equationEl.textContent = `${q.a} âˆ’ ${q.b} = ?`;
      feedbackEl.textContent = "";
      feedbackEl.className = "feedback";
      hintTextEl.textContent = "";
      answerInput.value = "";
      answerInput.focus({ preventScroll: true });
      updateTopBar();
    }

    function setModeText(text) {
      modeTextEl.textContent = text;
    }

    // --- Game flow ---
    function initQuestions() {
      questions = Array.from({ length: TOTAL_QUESTIONS }, () => makeQuestion());
    }

    function startGame() {
      if (started && !finished) return;

      started = true;
      finished = false;

      idx = 0;
      correctCount = 0;
      answeredCount = 0;
      wrong = [];

      remaining = TIME_LIMIT_SECONDS;
      startTimeMs = Date.now();

      initQuestions();

      // UI
      resultsEmpty.classList.add("hidden");
      resultsArea.classList.add("hidden");
      questionArea.classList.remove("hidden");
      restartBtn.classList.remove("hidden");
      startBtn.textContent = "Runningâ€¦";
      startBtn.disabled = true;

      setModeText("Answer as many as you can before time runs out.");
      updateTopBar();
      showQuestion();
      startTimer();
    }

    function startTimer() {
      clearInterval(timerId);
      timerId = setInterval(() => {
        if (finished) return;
        remaining -= 1;
        if (remaining <= 0) {
          remaining = 0;
          updateTopBar();
          finishGame("Time's up!");
          return;
        }
        updateTopBar();
      }, 1000);
    }

    function finishGame(reason) {
      finished = true;
      clearInterval(timerId);

      // Disable inputs
      startBtn.textContent = "Start";
      startBtn.disabled = false;

      // Compute time used
      const used = Math.min(TIME_LIMIT_SECONDS, Math.round((Date.now() - startTimeMs) / 1000));

      // Stats
      const accuracy = answeredCount === 0 ? 0 : Math.round((correctCount / answeredCount) * 100);

      scoreText.textContent = `${correctCount} / ${TOTAL_QUESTIONS}`;
      accuracyText.textContent = `${accuracy}%`;
      answeredText.textContent = `${answeredCount}`;
      timeUsedText.textContent = `${used}s`;

      // Review list
      reviewList.innerHTML = "";
      if (wrong.length === 0) {
        wrongCountText.textContent = "No wrong answers ðŸŽ‰";
        const div = document.createElement("div");
        div.className = "reviewItem";
        div.innerHTML = `
          <div class="eq">Perfect!</div>
          <div class="ans">You didnâ€™t miss any of the questions you answered.</div>
        `;
        reviewList.appendChild(div);
      } else {
        wrongCountText.textContent = `${wrong.length} wrong (shown below)`;
        wrong.forEach((w, k) => {
          const div = document.createElement("div");
          div.className = "reviewItem";
          div.innerHTML = `
            <div class="eq">
              ${w.a} âˆ’ ${w.b} = ${w.correct}
              <span class="badge bad">Your answer: ${w.user}</span>
            </div>
            <div class="ans">Question #${w.i + 1}</div>
          `;
          reviewList.appendChild(div);
        });
      }

      // Show results
      resultsEmpty.classList.add("hidden");
      resultsArea.classList.remove("hidden");

      // Update left panel
      questionArea.classList.add("hidden");
      setModeText(`${reason} â€” Game finished. You can restart anytime.`);
      updateTopBar();
    }

    function submitAnswer() {
      if (!started || finished) return;
      if (idx >= TOTAL_QUESTIONS) return;

      const raw = answerInput.value;
      if (raw === "" || raw === null) {
        feedbackEl.textContent = "Type an answer first.";
        feedbackEl.className = "feedback bad";
        answerInput.focus();
        return;
      }

      const userAns = Number(raw);
      const q = questions[idx];

      answeredCount += 1;

      if (Number.isFinite(userAns) && userAns === q.correct) {
        correctCount += 1;
        feedbackEl.textContent = "âœ… Correct!";
        feedbackEl.className = "feedback good";
      } else {
        wrong.push({ i: idx, a: q.a, b: q.b, correct: q.correct, user: raw });
        feedbackEl.textContent = `âŒ Incorrect. (${q.a} âˆ’ ${q.b} = ${q.correct})`;
        feedbackEl.className = "feedback bad";
      }

      idx += 1;
      updateTopBar();

      if (idx >= TOTAL_QUESTIONS) {
        finishGame("All questions completed!");
        return;
      }

      // Short delay so the feedback is visible, then next question
      setTimeout(() => {
        if (!finished) showQuestion();
      }, 250);
    }

    function restartGame() {
      clearInterval(timerId);
      started = false;
      finished = false;

      // UI reset
      remaining = TIME_LIMIT_SECONDS;
      updateTopBar();

      startBtn.disabled = false;
      startBtn.textContent = "Start";

      questionArea.classList.add("hidden");
      resultsArea.classList.add("hidden");
      resultsEmpty.classList.remove("hidden");

      feedbackEl.textContent = "";
      setModeText("Click Start to begin.");
      answerInput.value = "";
    }

    // --- Events ---
    startBtn.addEventListener("click", startGame);
    restartBtn.addEventListener("click", () => {
      restartGame();
      startGame();
    });
    submitBtn.addEventListener("click", submitAnswer);

    answerInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") submitAnswer();
    });

    // Initialize UI
    restartGame();
  </script>
</body>
</html>
